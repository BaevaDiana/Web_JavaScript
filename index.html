<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Laboratory works JavaScript</title>


    <style>
        body {
            background-color: pink;
        }

        button {
            display: block;
            margin-bottom: 10px;
        }

        #date {
            position: absolute;
            bottom: 75%;
            left: 50%;
            transform: translateX(-50%);
        }
        #time {
            position: absolute;
            bottom: 72%;
            left: 50%;
            transform: translateX(-50%);
        }
        #parent {
            display: flex;
            margin-top: 20px;
        }
        #child {
            width: 100px;
            height: 100px;
            margin-right: 10px;
        }
        .red {
            background-color: red;
        }
        .green {
            background-color: green;
        }
        .blue {
            background-color: blue;
        }
        .yellow {
            background-color: yellow;
        }
        .purple {
            background-color: purple;
        }
        .block {
            display: inline-block;
            width: 200px;
            height: 200px;
            margin-right: 10px;
            border: 1px solid black;
            background-color: antiquewhite;
        }
    </style>
    <script>
        function toggleContent(id) {
            var x = document.getElementById(id);
            if (x.style.display === "none") {
                x.style.display = "block";
                x.style.marginTop = "10px";
            } else {
                x.style.display = "none";
                x.style.marginTop = "0";
            }
        }
    </script>

    <script>
        function task3(str){
            let DT3 = document.getElementById("DT3")
            let count = document.getElementById(str).childElementCount;
            DT3.innerHTML="Количество дочерних форм: "+count
        }
    </script>
</head>

<body>
<h1>Задания по JS - Вариант 15</h1>

<button onclick="toggleContent('myContent')">Задание 1 - Дата/время</button>
<div id="myContent" style="display: none;">
    <div id="date"></div>
    <script>
        const date = new Date();
        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        const formattedDate = date.toLocaleDateString('ru-US', options);
        document.getElementById('date').innerHTML = formattedDate;
    </script>
    <div id="time"></div>
    <script>
        function updateTime() {
            const date = new Date();
            const options = {
                hour:  'numeric',
                hour12 : true, // время в AM-PM формате
                minute : 'numeric',
                second : 'numeric'
            };
            const formattedTime =date.toLocaleString('en-US', options);
            document.getElementById('time').innerHTML = formattedTime;
        }
        updateTime();
        setInterval(updateTime, 1000);
    </script>
    <script>
        function hide(elementId) {
            document.getElementById(elementId).style.display = 'none';
        }
    </script>
</div>

<button onclick="toggleContent2('myCalendar')">Задание 2 - Календарь</button>
<div id="myCalendar"></div>
<script>
    function createCalendar(elem, year, month) {
        let mon = month - 1;
        let d = new Date(year, mon);

        let monthNames = ["Январь", "Февраль", "Март", "Апрель", "Май", "Июнь", "Июль", "Август", "Сентябрь", "Октябрь", "Ноябрь", "Декабрь"];

        let table = '<table><tr><th colspan="7">' + monthNames[mon] + ' ' + year + '</th></tr><tr><th>пн</th><th>вт</th><th>ср</th><th>чт</th><th>пт</th><th style="color:red;">сб</th><th style="color:red;">вс</th></tr><tr>';

        for (let i = 0; i < getDay(d); i++) {
            table += '<td></td>';
        }

        while (d.getMonth() == mon) {
            table += '<td>' + d.getDate() + '</td>';

            if (getDay(d) % 7 == 6) {
                table += '</tr><tr>';
            }

            d.setDate(d.getDate() + 1);
        }

        if (getDay(d) != 0) {
            for (let i = getDay(d); i < 7; i++) {
                table += '<td></td>';
            }
        }

        table += '</tr></table>';

        elem.innerHTML = table;
    }

    function getDay(date) {
        let day = date.getDay();
        if (day == 0) day = 7;
        return day - 1;
    }
    function toggleContent2(id) {
        var x = document.getElementById(id);
        if (x.style.display === "none") {
            x.style.display = "block";
            x.style.marginTop = "10px";
            createCalendar(document.getElementById('myCalendar'), 2023, 3);
        } else {
            x.style.display = "none";
            x.style.marginTop = "0";
        }
    }
</script>

<button onclick="toggleContent3('myElement')" style="position: relative;">Задание 3 - Нахождение элементов в DOM-дереве</button>
<div id="myElement" style="display:none; display:flex;"></div>
<p>Число пробельных узлов: <span id="whitespace"></span></p>

<script>
    function createChildElements() {
        const parent = document.getElementById('myElement');
        const colors = ['red', 'green', 'blue', 'yellow', 'purple'];
        const children = [];

        for (let i = 0; i < colors.length; i++) {
            const child = document.createElement('div');
            child.style.backgroundColor = colors[i];
            child.style.width = "50px";
            child.style.height = "50px";
            child.style.marginTop = "10px";
            parent.appendChild(child);
            children.push(child);
        }

        const whitespace = parent.childNodes.length - children.length;
        document.getElementById('whitespace').textContent = whitespace;
    }
    function toggleContent3(id) {
        var x = document.getElementById(id);
        if (x.style.display === "none") {
            x.style.display = "flex";
            createChildElements();
        } else {
            x.style.display = "none";
        }
    }
</script>

<button id="Task4">Задание 4 - Изменение блока</button>
<div style="display: flex;">
    <div id="block1" class="block"></div>
    <div id="block2" class="block"></div>
    <div id="block3" class="block"></div>
    <div id="block4" class="block"></div>
    <div id="block5" class="block"></div>
</div>
<script>
    const button = document.querySelector('#Task4');
    const blocks = document.querySelectorAll('.block');
    blocks.forEach((b) => {
        b.style.display = 'none';
    });
    button.addEventListener('click', () => {
        blocks.forEach((b) => {
            b.style.display = 'block';
            b.innerHTML = '';
        });
        const intervalId = setInterval(() => {
            const randomIndex = Math.floor(Math.random() * blocks.length);
            const block = blocks[randomIndex];
            block.innerHTML = '<img src="https://picsum.photos/200">';
            setTimeout(() => {
                block.innerHTML = '';
            }, 100);
        }, 100);
        setTimeout(() => {
            clearInterval(intervalId);
            blocks.forEach((b) => {
                b.style.display = 'none';
                b.innerHTML = '';
            });
        }, 5000);
    });
</script>

<button onclick="toggleContent5('myList')" style="position: relative;">Задание 5 - Создание элемента</button>
<div id="myList" style="display:none;">
    <h1>Список элементов</h1>
    <ul>
        <li>Элемент 1</li>
        <li>
            Элемент 2
            <ul>
                <li>Подэлемент 1</li>
                <li>Подэлемент 2</li>
                <li>Подэлемент 3</li>
                <li>Подэлемент 4</li>
                <li>Подэлемент 5</li>
            </ul>
        </li>
        <li>Элемент 3</li>
        <li>
            Элемент 4
            <ul>
                <li>Подэлемент 1</li>
                <li>Подэлемент 2</li>
            </ul>
        </li>
        <li>Элемент 5</li>
    </ul>
    <button onclick="createLi()" style="font-size: 16px; background-color: #008CBA; color: white; padding: 10px 20px; border-radius: 8px;">Добавить элемент</button>
    <button onclick="deleteLi()" style="font-size: 16px; background-color: #f44336; color: white; padding: 10px 20px; border-radius: 8px;">Удалить элемент</button>
</div>

<script>
    const list = document.getElementById('myList');
    let ul = document.querySelector('#myList ul');
    let liCount = ul.children.length;

    function createLi() {
        let li = document.createElement('li');
        let content = prompt('Введите содержимое пункта списка', '');
        if (content === null) {
            return;
        }
        li.textContent = content;
        ul.appendChild(li);
        li.onclick = function(event) {
            if (event.target.tagName !== 'LI') {
                return;
            }
            let result = confirm(`Вы уверены, что хотите удалить пункт списка "${event.target.textContent}"?`);
            if (result) {
                event.target.remove();
            }
        };
        liCount++;
    }

    function deleteLi() {
        let liList = ul.querySelectorAll('li');
        if (liList.length === 0) {
            alert('Список пуст!');
            return;
        }
        let liToDelete = prompt(`Введите номер пункта списка (от 1 до ${liList.length})`, '');
        if (liToDelete === null) {
            return;
        }
        liToDelete = parseInt(liToDelete);
        if (isNaN(liToDelete) || liToDelete <= 0 || liToDelete > liList.length) {
            alert(`Некорректный номер пункта списка! Введите число от 1 до ${liList.length}.`);
            return;
        }
        let result = confirm(`Вы уверены, что хотите удалить пункт списка "${liList[liToDelete - 1].textContent}"?`);
        if (result) {
            liList[liToDelete - 1].remove();
            liCount--;
        }
    }

    let listVisible = false;

    function toggleContent5(id) {
        var x = document.getElementById(id);
        if (!listVisible) {
            x.style.display = 'block';
            listVisible = true;
        } else {
            x.style.display = 'none';
            listVisible = false;
        }
    }
</script>

<button onclick="toggleContent6('myArray')">Задание 6 - Обработка события</button>
<div id="myArray" style="display:none;">
    <img id="MyImage1" src="https://picsum.photos/id/237/200/300" alt="">
    <img id="MyImage2" src="https://picsum.photos/id/238/200/300" alt="">
    <img id="MyImage3" src="https://picsum.photos/id/239/200/300" alt="">
    <img id="MyImage4" src="https://picsum.photos/id/240/200/300" alt="">
</div>

<script>
    function toggleContent6(id) {
        var x = document.getElementById(id);

        if (x.style.display === "none") {
            x.style.display = "flex";
        } else {
            x.style.display = "none";
        }
    }

    document.addEventListener("DOMContentLoaded", function() {
        let images = [
            "https://picsum.photos/id/237/200/300",
            "https://picsum.photos/id/238/200/300",
            "https://picsum.photos/id/239/200/300",
            "https://picsum.photos/id/240/200/300"
        ];

        let currentImageIndex = 0;

        let imageElements = document.querySelectorAll("#myArray img");

        imageElements.forEach(function(imageElement) {
            imageElement.addEventListener("mouseover", function() {
                currentImageIndex++;

                if (currentImageIndex >= images.length) {
                    currentImageIndex = 0;
                }

                imageElement.src = images[currentImageIndex];
            });
        });
    });
</script>

<button onclick="toggleContent7(7)">Задание 7 - Меню</button>
<div class="content" id="content7" style="display:none;">
    <div class="menu cand">
        <h3 class="title">СЛАДОСТИ</h3>
        <ul id="list7">
            <li>Печенье</li>
            <li>Шоколад</li>
            <li>Конфета</li>
            <li>Леденец</li>
        </ul>
        <h3 id="end7">СЛАДОСТИ КОНЧИЛИСЬ</h3>
    </div>
</div>
<script>
    let endtext = document.getElementById("end7");
    endtext.style.visibility = "hidden";

    let menuElement = document.querySelector(".cand");
    let titleElement = menuElement.querySelector(".title");

    titleElement.onclick = function () {
        menuElement.classList.toggle("hidden");
    };

    document.addEventListener("DOMContentLoaded", function () {
        const itemsList1 = document.getElementById("list7");

        itemsList1.addEventListener("click", function (event) {
            let target = event.target;
            if (target.tagName === "LI") {
                target.classList.add("fading");
                setTimeout(() => {
                    target.remove();
                }, 100);
            }

            if (itemsList1.childElementCount == 1) {
                setTimeout(()=>{
                    endtext.style.visibility = "visible";
                    endtext.classList.add("fading_out");
                },120);
            }
        });
    });

    function toggleContent7(id) {
        let content = document.getElementById("content" + id);
        if (content.style.display === "none") {
            content.style.display = "block";
        } else {
            content.style.display = "none";
        }
    }
</script>







</body>
</html>